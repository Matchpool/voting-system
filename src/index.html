<html>
  <head>
    <title>Contest</title>
    <!-- Bootstrap -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>

    <!-- Web3 -->
    <script src="./node_modules/web3/dist/web3.min.js"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="main.css">
  </head>

  <body>

    <!-- TOP NAVIGATION -->
    <div id="navgroup" class="d-flex flex-column">
      <div id="nav1" class="p-2">
        <div class="d-flex">
          <div><img src="imgs/logo.png" height="145%"></div>
          <div class="mr-auto" style="color: black; font-size: 0.9rem; margin-top:12px; font-family:Josefin Sans;font-weight:700; letter-spacing:2px"><span id="displaybounty" style="font-family:Josefin Sans;font-weight:700;"></span> (PRIZE) MATCHPOOL DEVELOPMENT CHALLENGE</div>
          <div>
            <div class="d-flex flex-column" style="align-items: flex-end;">
              <div><span id="time"></span></div>
              <div style="font-size:10px;margin-top:-13px;letter-spacing:2px;">TIME UNTIL CONTEST ENDS</div>
            </div>
          </div>
        </div>
      </div>

      <div id="nav2" class="p-2"></div>

      <div id="nav3" class="p-2">
        <div class="d-flex">
          <div class="p-2" style="width: 30px"></div>
          <div class="mr-auto p-2" style="font-size:xx-large">VOTING DASHBOARD</div>
          <div class="p-2">
            <div class="d-flex flex-column">
              <div style="font-size:x-small">LIQUID BALANCE</div>
              <div style="font-family:Josefin Sans;font-weight:700;"><span id="supply" style="font-family:Josefin Sans;font-weight:700;"></span> GUP</div>
            </div>
          </div>
          <div class="p-2"><img src="imgs/gup.png" height="50%"></div>

          <div class="p-2" style="width: 100px"></div>

          <div class="p-2">
            <div class="d-flex flex-column">
              <div style="font-size:x-small">LOCKED STAKE</div>
              <div style="font-family:Josefin Sans;font-weight:700;"><span id="lockedstake" style="font-family:Josefin Sans;font-weight:700;"></span> GUP</div>
            </div>
          </div>
          <div class="p-2"><img src="imgs/lock.png" height="50%"></div>

          <div class="p-2" style="width: 100px"></div>

          <div class="p-2">
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#stakeModal">
              STAKE GUP
            </button>
          </div>
          <div class="p-2" style="width: 60px"></div>

        </div>
      </div>
    </div>
    <!-- END OF TOP NAVIGATION -->


    <!-- Modal for STAKE GUP button -->
    <div class="modal fade" id="stakeModal" tabindex="-1" role="dialog" aria-labelledby="stakeModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="stakeModalLabel">STAKE GUP</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true"><img src="imgs/exit.png" style="height:3%;"></span>
            </button>
          </div>
          <div class="modal-body">
            <div style="height: 20px"></div>
            <p>First set the allowance that the contract can stake on your behalf. Next, stake an amount you wish to use towards voting for a particular submission. (Metamask transactions will be incurred. NOTE: The allowance will be replaced if you set it to a new value)</p>
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <button class="btn btn-outline-secondary" id="approveCb" type="button">SET ALLOWANCE</button>
              </div>
              <input type="text" id="approveInput" class="form-control" placeholder="" aria-label="" aria-describedby="basic-addon1">
            </div>
          </div>
          <div>
            <div class="col-12">
              <span id="allowance"></span> GUP
            </div>
          </div>
          <div class="modal-footer">
              <div class="col-6">
                <button type="button" id="stake" class="btn btn-outline-secondary" data-dismiss="modal">STAKE</button>
              </div>
              <div class="col-6">
                <button type="button" id="buttonRelease" class="btn btn-outline-secondary" data-dismiss="modal">RELEASE STAKE</button>
              </div>
          </div>
        </div>
      </div>
    </div>
    <!-- END OF Modal for STAKE GUP button -->


    <!-- Modal for SUBMIT PROPOSAL button -->
    <div class="modal fade" id="submitModal" tabindex="-1" role="dialog" aria-labelledby="submitModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content" style="align-items:center;">
          <div class="modal-header">
            <h5 class="modal-title" id="submitModalLabel">SUCCESSFUL SUBMISSION</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true"><img src="imgs/exit.png" style="height:3%;"></span>
            </button>
          </div>
          <div class="modal-footer" style="padding-top:0px;">
            <button type="button" class="btn btn-outline-secondary" data-dismiss="modal" style="padding-left: 30px; padding-right:30px;">Ok</button>
          </div>
        </div>
      </div>
    </div>
    <!-- END OF Modal for SUBMIT PROPOSAL button -->


    <div class="d-flex flex-nowrap">
       <!-- SIDE NAVIGATION -->
      <div id="sidenav" class="order-1">
        <nav id="sidenav-inner" class="nav nav-pills flex-column" role="tablist">
          <a class="nav-item nav-link active" data-toggle="pill" href="#vote-content" role="tab" aria-controls="vote-content" aria-selected="true" id="vote">VOTE</a>
          <a class="nav-item nav-link" data-toggle="pill" href="#submit-content" role="tab" aria-controls="submit-content" aria-selected="false" id="submit">SUBMIT PROPOSAL</a>
        </nav>
      </div>
      <!-- END OF SIDE NAVIGATION -->

      <!-- CONTENT OF PAGE LINKED TO SIDE NAVIGATION VIA BOOTSTRAP -->
      <div id="content" class="order-2 tab-content">
        <div id="vote-content" class="tab-pane fade show active" role="tabpanel" aria-labelledby="vote">
          <div class="container"></div>
        </div>

        <div id="submit-content" class="tab-pane fade" role="tabpanel" aria-labelledby="submit">
          <form class="container" id="needs-validation" novalidate>
            <div class="row">
              <div class="col-md-12 mb-3">
                <label for="validationCustom01">Name</label>
                <input type="text" pattern=".{1,32}" class="form-control" id="validationCustom01" placeholder="Enter the name of your proposal" required>
                <div class="invalid-feedback">
                  Please provide a valid name.
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12 mb-3">
                <label for="validationCustom02">Description</label>
                <textarea rows="5" maxlength="256" minlength="32" class="form-control" id="validationCustom02" placeholder="Explain a little your proposal" required></textarea>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12 mb-3">
                <label for="validationCustom03">Media</label>
                <input type="text" pattern=".{1,32}" class="form-control" id="validationCustom03" placeholder="Link url to any external resources about your proposal" required>
                <div class="invalid-feedback">
                  Please provide a valid url.
                </div>
              </div>
            </div>
            <div class="d-flex">
              <div class="mr-auto p-2"></div>
              <div class="p-2">
                <button id="buttonRegister" type="button" class="btn btn-secondary" data-toggle="modal" data-target="#submitModal">
                  SUBMIT
                </button>
              </div>
            </div>
          </form>
        </div>

        <div id="reset-content" class="tab-pane fade" role="tabpanel" aria-labelledby="reset">
          <div class="container"></div>
        </div>
      </div>
      <!-- END OF CONTENT OF PAGE LINKED TO SIDE NAVIGATION VIA BOOTSTRAP  -->
    </div>

    <!-- VALIDATION FOR SUBMIT PROPOSAL PAGE -->
    <script>
    (function() {
      'use strict';
      window.addEventListener('load', function() {
        checkIfValid();
      }, false);
    })();

    function checkIfValid() {
      var form = document.getElementById('needs-validation');
      form.addEventListener('click', function(event) {
        if (form.checkValidity() === false) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    }
    </script>

  <!-- JS to interact with smart contracts -->
  <script src="./js/GlobalVars.js"></script>
  <script src="./js/DevContest.js"></script>

  </body>
</html>
